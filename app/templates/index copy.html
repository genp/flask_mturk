<html>
    <head>
        <title>Funny words comparison</title>
        <script src="static/jquery.min.js"></script>
        <style>
            #choice_container {
                border-collapse: collapse;
                font-size: 0;
            }

            #choice_container.thinking div {
                cursor: default;
            }

            #choice_container.thinking div.hiding {
                color: white;
            }

            #choice_container.thinking div:hover, #choice_container.thinking div:active {
                background: white;
            } 

            #choice_container div {
                border-collapse: collapse;
                border: 1px solid #ccc;
                background: white;
                text-align: center;
                font-size: 23px;
                min-width: 190px;
                padding: 30px 10px 30px 10px;
                margin-top: -1px;
                margin-left: -1px;
                user-select: none;
                -moz-user-select: none;
                -khtml-user-select: none;
                -webkit-user-select: none;
                -o-user-select: none;
                cursor: pointer;
            }

            #choice_container div:hover {
                background: #ccc;
            }

            #choice_container div:active {
                background: yellow;
            }

            #try_again {
                display: none;
            }

            #try_again input {
                font-size: 200%;
            }

            #choice_none {
                display: inline-block;
                margin-top: 20px !important;
                min-width: 400px !important;
            }

            #all_done {
                display:none;
            }
        </style>
    </head>
    <body>
        <div id="instructions">
        <h1>Instructions</h1>
        <p>Please click on the word you find most humorous, if any. Do not look up
        words you do not know -- we are interested in your gut reaction.</p>
        <p>
            Progress <span id="counter">1</span>
            /<span id="total">TBD</span>
        </div>
        <div id="choice_container" style="display:none;">
            <div id="choice_0" onclick="choose(0);">You should not see this</div>
            <div id="choice_1" onclick="choose(1);">You should not see this</div>
            <br/>
            <div id="choice_2" onclick="choose(2);">You should not see this</div>
            <div id="choice_3" onclick="choose(3);">You should not see this</div>
            <br/>
            <div id="choice_4" onclick="choose(4);">You should not see this</div>
            <div id="choice_5" onclick="choose(5);">You should not see this</div>
            <br/>
            <div id="choice_6" onclick="choose(6);">You should not see this</div>
            <div id="choice_7" onclick="choose(7);">You should not see this</div>
            <br/>
            or<br/>
            <div id="choice_none" onclick="choose(-1);">None of the six words are at all funny.</div>
        </div>
        <div id="all_done">
            <h2>Demographics</h2>
            <p>We will use these ratings to build an automatic system for humor generation, and to understand what different people find funny. If you could kindly fill in these details about yourself, we hope to understand the differences in sense of humor across demographics.</p>
            <p>
                <strong>What is your</strong>
            </p>
            <p>
                <u>Sex</u>
                &nbsp;
            </p>
            <select name="sex">
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other" selected="selected">Other</option>
            </select>
            <p>
                <u>Year of Birth</u>
            </p>
            <select name="birthyear">
                <option value="2007">2007</option>
                <option value="2006">2006</option>
                <option value="2005">2005</option>
                <option value="2004">2004</option>
                <option value="2003">2003</option>
                <option value="2002">2002</option>
                <option value="2001">2001</option>
                <option value="2000" selected="selected">2000</option>
                <option value="1999">1999</option>
                <option value="1998">1998</option>
                <option value="1997">1997</option>
                <option value="1996">1996</option>
                <option value="1995">1995</option>
                <option value="1994">1994</option>
                <option value="1993">1993</option>
                <option value="1992">1992</option>
                <option value="1991">1991</option>
                <option value="1990">1990</option>
                <option value="1989">1989</option>
                <option value="1988">1988</option>
                <option value="1987">1987</option>
                <option value="1986">1986</option>
                <option value="1985">1985</option>
                <option value="1984">1984</option>
                <option value="1983">1983</option>
                <option value="1982">1982</option>
                <option value="1981">1981</option>
                <option value="1980">1980</option>
                <option value="1979">1979</option>
                <option value="1978">1978</option>
                <option value="1977">1977</option>
                <option value="1976">1976</option>
                <option value="1975">1975</option>
                <option value="1974">1974</option>
                <option value="1973">1973</option>
                <option value="1972">1972</option>
                <option value="1971">1971</option>
                <option value="1970">1970</option>
                <option value="1969">1969</option>
                <option value="1968">1968</option>
                <option value="1967">1967</option>
                <option value="1966">1966</option>
                <option value="1965">1965</option>
                <option value="1964">1964</option>
                <option value="1963">1963</option>
                <option value="1962">1962</option>
                <option value="1961">1961</option>
                <option value="1960">1960</option>
                <option value="1959">1959</option>
                <option value="1958">1958</option>
                <option value="1957">1957</option>
                <option value="1956">1956</option>
                <option value="1955">1955</option>
                <option value="1954">1954</option>
                <option value="1953">1953</option>
                <option value="1952">1952</option>
                <option value="1951">1951</option>
                <option value="1950">1950</option>
                <option value="1949">1949</option>
                <option value="1948">1948</option>
                <option value="1947">1947</option>
                <option value="1946">1946</option>
                <option value="1945">1945</option>
                <option value="1944">1944</option>
                <option value="1943">1943</option>
                <option value="1942">1942</option>
                <option value="1941">1941</option>
                <option value="1940">1940</option>
                <option value="1939">1939</option>
                <option value="1938">1938</option>
                <option value="1937">1937</option>
                <option value="1936">1936</option>
                <option value="1935">1935</option>
                <option value="1934">1934</option>
                <option value="1933">1933</option>
                <option value="1932">1932</option>
                <option value="1931">1931</option>
                <option value="1930">1930</option>
                <option value="1929">1929</option>
                <option value="1928">1928</option>
                <option value="1927">1927</option>
                <option value="1926">1926</option>
                <option value="1925">1925</option>
                <option value="1924">1924</option>
                <option value="1923">1923</option>
                <option value="1922">1922</option>
                <option value="1921">1921</option>
                <option value="1920">1920</option>
                <option value="1919">1919</option>
                <option value="1918">1918</option>
                <option value="1917">1917</option>
                <option value="1916">1916</option>
                <option value="1915">1915</option>
                <option value="1914">1914</option>
                <option value="1913">1913</option>
                <option value="1912">1912</option>
                <option value="1911">1911</option>
                <option value="1910">1910</option>
                <option value="1909">1909</option>
                <option value="1908">1908</option>
                <option value="1907">1907</option>
                <option value="1906">1906</option>
                <option value="1905">1905</option>
                <option value="1904">1904</option>
                <option value="1903">1903</option>
                <option value="1902">1902</option>
                <option value="1901">1901</option>
                <option value="1900">1900</option>
            </select>
            <p>
                <u>State (if in the US)</u>
            </p>
            <select name="state">
                <option value="AL">Alabama</option>
                <option value="AK">Alaska</option>
                <option value="AZ">Arizona</option>
                <option value="AR">Arkansas</option>
                <option value="CA">California</option>
                <option value="CO">Colorado</option>
                <option value="CT">Connecticut</option>
                <option value="DE">Delaware</option>
                <option value="DC">District Of Columbia</option>
                <option value="FL">Florida</option>
                <option value="GA">Georgia</option>
                <option value="HI">Hawaii</option>
                <option value="ID">Idaho</option>
                <option value="IL">Illinois</option>
                <option value="IN">Indiana</option>
                <option value="IA">Iowa</option>
                <option value="KS">Kansas</option>
                <option value="KY">Kentucky</option>
                <option value="LA">Louisiana</option>
                <option value="ME">Maine</option>
                <option value="MD">Maryland</option>
                <option value="MA">Massachusetts</option>
                <option value="MI">Michigan</option>
                <option value="MN">Minnesota</option>
                <option value="MS">Mississippi</option>
                <option value="MO">Missouri</option>
                <option value="MT">Montana</option>
                <option value="NE">Nebraska</option>
                <option value="NV">Nevada</option>
                <option value="NH">New Hampshire</option>
                <option value="NJ">New Jersey</option>
                <option value="NM">New Mexico</option>
                <option value="NY">New York</option>
                <option value="NC">North Carolina</option>
                <option value="ND">North Dakota</option>
                <option value="OH">Ohio</option>
                <option value="OK">Oklahoma</option>
                <option value="OR">Oregon</option>
                <option value="PA">Pennsylvania</option>
                <option value="RI">Rhode Island</option>
                <option value="SC">South Carolina</option>
                <option value="SD">South Dakota</option>
                <option value="TN">Tennessee</option>
                <option value="TX">Texas</option>
                <option value="UT">Utah</option>
                <option value="VT">Vermont</option>
                <option value="VA">Virginia</option>
                <option value="WA">Washington</option>
                <option value="WV">West Virginia</option>
                <option value="WI">Wisconsin</option>
                <option value="WY">Wyoming</option>
            </select>
            <p>
                <u>Education level</u>
            </p>
            <select name="education">
                <option value="elementary">Elementary</option>
                <option value="hs">High school diploma</option>
                <option value="under">Undergraduate degree</option>
                <option value="grad">Graduate degree</option>
                <option value="post">Postgraduate degree</option>
            </select>
            <p>
                <u>Native language</u>
            </p>
            <select name="nativelanguage">
                <option value="af">Afrikaans</option>
                <option value="sq">Albanian</option>
                <option value="am">Amharic</option>
                <option value="ar">Arabic</option>
                <option value="hy">Armenian</option>
                <option value="az">Azerbaijani</option>
                <option value="eu">Basque</option>
                <option value="be">Belarusian</option>
                <option value="bn">Bengali</option>
                <option value="bs">Bosnian</option>
                <option value="bg">Bulgarian</option>
                <option value="ca">Catalan</option>
                <option value="ceb">Cebuano</option>
                <option value="ny">Chichewa</option>
                <option value="zh-CN">Chinese</option>
                <option value="co">Corsican</option>
                <option value="hr">Croatian</option>
                <option value="cs">Czech</option>
                <option value="da">Danish</option>
                <option value="nl">Dutch</option>
                <option selected="selected" value="en">English</option>
                <option value="eo">Esperanto</option>
                <option value="et">Estonian</option>
                <option value="tl">Filipino</option>
                <option value="fi">Finnish</option>
                <option value="fr">French</option>
                <option value="fy">Frisian</option>
                <option value="gl">Galician</option>
                <option value="ka">Georgian</option>
                <option value="de">German</option>
                <option value="el">Greek</option>
                <option value="gu">Gujarati</option>
                <option value="ht">Haitian Creole</option>
                <option value="ha">Hausa</option>
                <option value="haw">Hawaiian</option>
                <option value="iw">Hebrew</option>
                <option value="hi">Hindi</option>
                <option value="hmn">Hmong</option>
                <option value="hu">Hungarian</option>
                <option value="is">Icelandic</option>
                <option value="ig">Igbo</option>
                <option value="id">Indonesian</option>
                <option value="ga">Irish</option>
                <option value="it">Italian</option>
                <option value="ja">Japanese</option>
                <option value="jw">Javanese</option>
                <option value="kn">Kannada</option>
                <option value="kk">Kazakh</option>
                <option value="km">Khmer</option>
                <option value="ko">Korean</option>
                <option value="ku">Kurdish (Kurmanji)</option>
                <option value="ky">Kyrgyz</option>
                <option value="lo">Lao</option>
                <option value="la">Latin</option>
                <option value="lv">Latvian</option>
                <option value="lt">Lithuanian</option>
                <option value="lb">Luxembourgish</option>
                <option value="mk">Macedonian</option>
                <option value="mg">Malagasy</option>
                <option value="ms">Malay</option>
                <option value="ml">Malayalam</option>
                <option value="mt">Maltese</option>
                <option value="mi">Maori</option>
                <option value="mr">Marathi</option>
                <option value="mn">Mongolian</option>
                <option value="my">Myanmar (Burmese)</option>
                <option value="ne">Nepali</option>
                <option value="no">Norwegian</option>
                <option value="ps">Pashto</option>
                <option value="fa">Persian</option>
                <option value="pl">Polish</option>
                <option value="pt">Portuguese</option>
                <option value="pa">Punjabi</option>
                <option value="ro">Romanian</option>
                <option value="ru">Russian</option>
                <option value="sm">Samoan</option>
                <option value="gd">Scots Gaelic</option>
                <option value="sr">Serbian</option>
                <option value="st">Sesotho</option>
                <option value="sn">Shona</option>
                <option value="sd">Sindhi</option>
                <option value="si">Sinhala</option>
                <option value="sk">Slovak</option>
                <option value="sl">Slovenian</option>
                <option value="so">Somali</option>
                <option value="es">Spanish</option>
                <option value="su">Sundanese</option>
                <option value="sw">Swahili</option>
                <option value="sv">Swedish</option>
                <option value="tg">Tajik</option>
                <option value="ta">Tamil</option>
                <option value="te">Telugu</option>
                <option value="th">Thai</option>
                <option value="tr">Turkish</option>
                <option value="uk">Ukrainian</option>
                <option value="ur">Urdu</option>
                <option value="uz">Uzbek</option>
                <option value="vi">Vietnamese</option>
                <option value="cy">Welsh</option>
                <option value="xh">Xhosa</option>
                <option value="yi">Yiddish</option>
                <option value="yo">Yoruba</option>
                <option value="zu">Zulu</option>
            </select>
            <p>
                <u>Any feedback on HIT? Pay ok? (optional)</u>
            </p>
            <input name="feedback" size="80" type="text"/>
            <p>
                <input type="button" value="Submit" onclick="submit();"/>
            </p>
        </div>
    </body>
    <script src="static/all_words.js"></script>
    <script>
        var MAX_CHOICES = 8; // don't change this
        var NUM_ROUNDS = 5;
        var NUM_CHOICES = 6;
        var menu, results;
        function choose(i) {
            if ($("#choice_container").hasClass("thinking")) {
                return;
            }
            results[results.length - 1].push(i);
            populate();
        }
        function all_done() {
            console.log("all done!")
            document.getElementById("choice_container").style.display = "none";
            $("#all_done").show();
            $("#instructions").hide();
        }

        function submit() {
            // Send to server
            demographics = {};
            form_names = ["state", "feedback", "nativelanguage", "education", "birthyear", "sex"];
            form_names.forEach(function(k) {
                demographics[k] = $("[name=" + k + "]").val();
            })
            if (demographics.sex == "Other" && demographics.birthyear == "2000" && demographics.state == "AL") {
                console.log("fishy -- didn't seem to answer demographics")
                return false;
                // fishy!
            }
            results.push(demographics);
            $.getJSON('/_funny_words_results', {
                data: JSON.stringify(results)
            }, function(data) {
                console.log("Got data:");
                console.log(data);
            });
            $("body").text("All done!")
        }

        function doneThinking(first) {
            els = $(".hiding");
            if (els.length) {
                $(els[0]).removeClass("hiding");
                setTimeout(doneThinking, first ? 700 : 550);
            } else {
                $("#choice_container").removeClass("thinking")
            }
        }

        function populate() {
            if (menu.length == 0) {
                all_done();
                return;
            }
            $("#counter").text(results.length + 1);
            choices = menu.shift();
            for (var i = 0; i < MAX_CHOICES; i++) {
                document.getElementById("choice_" + i).style.display = "none";
            }
            choices.forEach(function(choice, i) {
                el = document.getElementById("choice_" + i);
                el.innerText = choice;
                el.style.display = "inline-block";
                $(el).addClass("hiding");
            });
            results.push(choices);
            $("#choice_container").show().addClass("thinking");
            doneThinking(true);
        }
        function init() {
            results = [];
            menu = [];
            for (var i = 0; i < NUM_ROUNDS; i++) {
                choices = [];
                while (choices.length < NUM_CHOICES) {
                    var j = Math.floor(Math.random() * words.length);
                    choices.push(words.splice(j, 1)[0]);
                }
                menu.push(choices);
            }
            $("#total").text(menu.length);
            populate();

        }
        //         function try_again() {
        //             console.log("Try again");
        //             $("#all_done").hide();
        //             init();
        //             return false;
        //         }
        window.onload = init;
    </script>
</html>
